from Client.PLC_fun import *
from RegulatorParametersContainer import *

# Łączenie ze sterownikiem
plc = plc_connect()

# Wypełnianie database

## Wypełnianie k

'''
for i in range(0, 7):
    plc_write(plc, ADAPTIVE_PARAM_DB, ke_ADDRESS + i*REAL_SIZE, REAL_SIZE, ke[i])
    plc_write(plc, ADAPTIVE_PARAM_DB, T_ADDRESS + i*INT_SIZE, INT_SIZE, T[i])

for i in range(0, 7):
    for j in range(0, 58):
        plc_write(plc, ADAPTIVE_PARAM_DB, Ku_ADDRESS + int(58*i*REAL_SIZE) + int(j*REAL_SIZE), REAL_SIZE, Ku[i][j])
'''


#Dla Adaptive
T_praca = 2
ke = [-0.06679394631300445, -0.11354324359851957, -0.17322913576522614]
Ku = [[0.007547666862834427, 0.008338604928782658, 0.009050381353968375, 0.009690919091702341, 0.010267348120458519, 0.010786084809366601, 0.0097065512685331, 0.008735063667109653, 0.007860808144682076, 0.007074053154319656, 0.006366041138403052, 0.005728891046159753, 0.0051555106078064825, 0.00463951738880111, 0.004175167745440094, 0.0037572928909892266, 0.003381241360684568, 0.003042827235167706, 0.0027382835460180843, 0.0024642203447282165, 0.002217586968377579, 0.0019956380819753533, 0.0017959031194812525, 0.0016161587833451291, 0.0014544042964511794, 0.0013088391309902198, 0.001177842966354808, 0.0010599576529637372, 0.0009538709812509554, 0.0008584020751476078, 0.0007724882474686158, 0.00069517317088792, 0.0006255962328307124, 0.0005629829557894121, 0.0005066363764296344, 0.00045592928752493907, 0.00041029725636344903, 0.0003692323419125945, 0.00033227744080621636, 0.0002990211992178746, 0.000269093433983205, 0.00024216101200274072, 0.00021792414205785312, 0.0001961130377631313, 0.00017648491450971557, 0.0001588212869718602, 0.00014292553709461321, 0.00012862072549130716, 0.00011574762188900389, 0.00010416293269831859, 9.373770597826054e-05, 8.435589604140156e-05, 7.591307172161904e-05, 6.83152539258588e-05, 0.0, 0.0],
      [0.022600956927397074, 0.024986746548959517, 0.027138415553358344, 0.029078938499157186, 0.030829035421812773,
       0.032407393072939494, 0.029227213731757008, 0.02635910949699611, 0.02377245603537256, 0.021439634218983136,
       0.019335735220619956, 0.017438294548462477, 0.0157270521802887, 0.014183736236026095, 0.012791867878794478,
       0.011536585361261575, 0.010404485338556957, 0.00938347975335474, 0.008462666765007941, 0.0076322143445736,
       0.006883255292808441, 0.006207792560184241, 0.005598613857972341, 0.005049214648652767, 0.00455372869337395,
       0.004106865414879938, 0.0037038534070944753, 0.0033403894881825365, 0.0030125927531007594, 0.002716963135030459,
       0.002450344033230715, 0.0022098886082685316, 0.0019930293847415883, 0.0017974508369250615, 0.001621064664624352,
       0.0014619874952403115, 0.001318520773959587, 0.0011891326273466027, 0.0010724415066846492, 0.0009672014364170755,
       0.0008722887101779508, 0.0007866898923584796, 0.0007094909970951485, 0.0006398677291377815,
       0.0005770766823938095, 0.0005204474021707303, 0.0004693752263610211, 0.00042331482913077895,
       0.00038177439817454876, 0.0003443103833636526, 0.0003105227607164609, 0.00028005076112134087,
       0.0002525690182055838, 0.0002277840942188771, 0.00020543134683637926, 0.0],
      [0.06347518005817249, 0.07103112899634262, 0.07782701780841311, 0.08393930270516603, 0.08943674888554104, 0.0943812042143396, 0.084887347831688, 0.07634849653866349, 0.06866858325256875, 0.061761204723559227, 0.05554864939173901, 0.04996102303926986, 0.04493546239943888, 0.040415427874339604, 0.036350067402965286, 0.032693644322105656, 0.029405022782491325, 0.026447204930245896, 0.023786914646168014, 0.021394223159235476, 0.01924221232188876, 0.017306671758418365, 0.015565826478917133, 0.014000091894051082, 0.01259185347421192, 0.011325268573906352, 0.010186088191635294, 0.009161496659823319, 0.008239967461102587, 0.0074111335487014735, 0.006665670711884113, 0.005995192674162781, 0.005392156744016902, 0.004849778956584068, 0.0043619577515749235, 0.003923205328708908, 0.0035285859083499464, 0.0031736602027142968, 0.002854435472899557, 0.0025673206098311575, 0.0023090857337483613, 0.0020768258576903285, 0.0018679282061676477, 0.001680042821329675, 0.001511056125925764, 0.001359067145625668, 0.0012223661231847774, 0.001099415283850292, 0.000988831535608263, 0.0008893709096397134, 0.0007999145659332825, 0.0007194562066108016, 0.0006470907553603935, 0.0, 0.0, 0.0]
      ]
Tc = [1.7984575673183558, 1.7984575673183558, 1.7984575673183558]
plc_write(plc, ADAPTIVE_PARAM_DB, ke_ADAPTIVE_ADDRESS , REAL_SIZE, ke[T_praca])
plc_write(plc, ADAPTIVE_PARAM_DB, TC_ADAPTIVE_ADDRESS , REAL_SIZE, Tc[T_praca])


for j in range(0, 56):
    plc_write(plc, ADAPTIVE_PARAM_DB, KU_ADAPTIVE_ADDRESS + int(j*REAL_SIZE), REAL_SIZE, Ku[T_praca][j])
